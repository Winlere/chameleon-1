#
# This file list the preliminary checks done before trying to compile
#
---
preliminary_checks:
  stage: pre
  interruptible: true
  rules:
    - if: ($CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH || $CI_COMMIT_BRANCH =~ /^ci-.*$/) && $CI_PIPELINE_SOURCE != "schedule"
    - if: ($CI_PIPELINE_SOURCE == "merge_request_event")
  parallel:
    matrix:
      - TEST: [rebase, draft, header]
  script:
    - .gitlab/check_ci.sh $TEST

